--===[ Blox Fruits GUI - Tabs Full Part 1-3 ]===--

local Gui = Instance.new("ScreenGui", game.CoreGui)
Gui.Name = "BloxFruit_TabGUI"
Gui.ResetOnSpawn = false
Gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Toggle Button (Top Left)
local ToggleBtn = Instance.new("ImageButton", Gui)
ToggleBtn.Size = UDim2.new(0, 40, 0, 40)
ToggleBtn.Position = UDim2.new(0, 10, 0, 10)
ToggleBtn.Image = "rbxassetid://76955883171909"
ToggleBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
ToggleBtn.BackgroundTransparency = 0
ToggleBtn.AutoButtonColor = true
Instance.new("UICorner", ToggleBtn).CornerRadius = UDim.new(0, 6)

-- Main Frame
local MainFrame = Instance.new("Frame", Gui)
MainFrame.Size = UDim2.new(0, 580, 0, 360)
MainFrame.Position = UDim2.new(0.5, -290, 0.5, -180)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Visible = false
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 10)

-- Logo
local Logo = Instance.new("ImageLabel", MainFrame)
Logo.Size = UDim2.new(0, 30, 0, 30)
Logo.Position = UDim2.new(0, 10, 0, 5)
Logo.BackgroundTransparency = 1
Logo.Image = "rbxassetid://76955883171909"

-- Tabs Scroll
local TabScroll = Instance.new("ScrollingFrame", MainFrame)
TabScroll.Size = UDim2.new(1, -40, 0, 40)
TabScroll.Position = UDim2.new(0, 40, 0, 5)
TabScroll.BackgroundTransparency = 1
TabScroll.ScrollBarThickness = 2
TabScroll.CanvasSize = UDim2.new(0, 800, 0, 0)
TabScroll.AutomaticCanvasSize = Enum.AutomaticSize.X

local TabLayout = Instance.new("UIListLayout", TabScroll)
TabLayout.FillDirection = Enum.FillDirection.Horizontal
TabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
TabLayout.Padding = UDim.new(0, 5)

-- Tab Names
local Tabs = {
    "Tab Status", "Tab General", "Quest & Item",
    "Race & Gear", "Tab Shop", "Tab Setting", "Mic"
}

local TabFrames = {}

for _, tabName in ipairs(Tabs) do
    local TabBtn = Instance.new("TextButton", TabScroll)
    TabBtn.Size = UDim2.new(0, 100, 1, 0)
    TabBtn.Text = tabName
    TabBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    TabBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    TabBtn.Font = Enum.Font.GothamBold
    TabBtn.TextSize = 13
    TabBtn.AutoButtonColor = true
    Instance.new("UICorner", TabBtn).CornerRadius = UDim.new(0, 8)

    local Content = Instance.new("ScrollingFrame", MainFrame)
    Content.Size = UDim2.new(1, -20, 1, -50)
    Content.Position = UDim2.new(0, 10, 0, 45)
    Content.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Content.Visible = false
    Content.ScrollBarThickness = 4
    Content.CanvasSize = UDim2.new(0, 0, 0, 500)
    Instance.new("UICorner", Content).CornerRadius = UDim.new(0, 10)

    TabFrames[tabName] = Content

    TabBtn.MouseButton1Click:Connect(function()
        for _, f in pairs(TabFrames) do f.Visible = false end
        Content.Visible = true
    end)
end

-- M·∫∑c ƒë·ªãnh m·ªü Tab ƒë·∫ßu ti√™n
TabFrames["Tab Status"].Visible = true

-- Toggle GUI
local toggle = false
ToggleBtn.MouseButton1Click:Connect(function()
    toggle = not toggle
    MainFrame.Visible = toggle
end)
--===[ PH·∫¶N 4: Tab General UI + Auto Farm Level + Select Weapon ]===--

local GeneralTab = TabFrames["Tab General"]

-- Left Panel
local LeftScroll = Instance.new("ScrollingFrame", GeneralTab)
LeftScroll.Size = UDim2.new(0.5, -10, 1, 0)
LeftScroll.Position = UDim2.new(0, 0, 0, 0)
LeftScroll.CanvasSize = UDim2.new(0, 0, 0, 200)
LeftScroll.ScrollBarThickness = 4
LeftScroll.BackgroundTransparency = 1
Instance.new("UIListLayout", LeftScroll).Padding = UDim.new(0, 8)

-- Right Panel
local RightScroll = Instance.new("ScrollingFrame", GeneralTab)
RightScroll.Size = UDim2.new(0.5, -10, 1, 0)
RightScroll.Position = UDim2.new(0.5, 10, 0, 0)
RightScroll.CanvasSize = UDim2.new(0, 0, 0, 200)
RightScroll.ScrollBarThickness = 4
RightScroll.BackgroundTransparency = 1
Instance.new("UIListLayout", RightScroll).Padding = UDim.new(0, 8)

--===[ Panel Tr√°i: AUTO FARM LEVEL BUTTON ]===--
local function createToggleButton(parent, title, callback)
	local Frame = Instance.new("Frame", parent)
	Frame.Size = UDim2.new(1, -10, 0, 40)
	Frame.BackgroundTransparency = 1

	local TextLabel = Instance.new("TextLabel", Frame)
	TextLabel.Size = UDim2.new(0.8, 0, 1, 0)
	TextLabel.Text = title
	TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	TextLabel.BackgroundTransparency = 1
	TextLabel.Font = Enum.Font.GothamBold
	TextLabel.TextSize = 14
	TextLabel.TextXAlignment = Enum.TextXAlignment.Left

	local Status = Instance.new("ImageLabel", Frame)
	Status.Size = UDim2.new(0, 24, 0, 24)
	Status.Position = UDim2.new(0.9, 0, 0.5, -12)
	Status.BackgroundTransparency = 1
	Status.Image = "rbxassetid://6031094664" -- empty

	local Toggle = false
	Frame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			Toggle = not Toggle
			Status.Image = Toggle and "rbxassetid://6031094690" or "rbxassetid://6031094664"
			if callback then callback(Toggle) end
		end
	end)
end

createToggleButton(LeftScroll, "Auto Farm Level", function(state)
	getgenv().AutoFarmEnabled = state
end)

--===[ Panel Ph·∫£i: SELECT WEAPON ]===--
local SelectedWeapon = "Nothing"

local DropDownBtn = Instance.new("TextButton", RightScroll)
DropDownBtn.Size = UDim2.new(1, -10, 0, 40)
DropDownBtn.Text = "Select Weapon: " .. SelectedWeapon
DropDownBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
DropDownBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
DropDownBtn.Font = Enum.Font.GothamBold
DropDownBtn.TextSize = 13
Instance.new("UICorner", DropDownBtn).CornerRadius = UDim.new(0, 8)

local WeaponOptions = Instance.new("Frame", DropDownBtn)
WeaponOptions.Size = UDim2.new(1, 0, 0, 100)
WeaponOptions.Position = UDim2.new(0, 0, 1, 0)
WeaponOptions.Visible = false
WeaponOptions.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Instance.new("UICorner", WeaponOptions).CornerRadius = UDim.new(0, 8)

local ScrollList = Instance.new("ScrollingFrame", WeaponOptions)
ScrollList.Size = UDim2.new(1, 0, 1, 0)
ScrollList.CanvasSize = UDim2.new(0, 0, 0, 100)
ScrollList.ScrollBarThickness = 3
ScrollList.BackgroundTransparency = 1

local ListLayout = Instance.new("UIListLayout", ScrollList)
ListLayout.Padding = UDim.new(0, 3)

local weaponTypes = {"Melee", "Sword"}

for _, w in ipairs(weaponTypes) do
	local btn = Instance.new("TextButton", ScrollList)
	btn.Size = UDim2.new(1, -10, 0, 28)
	btn.Text = w
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 12
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

	btn.MouseButton1Click:Connect(function()
		SelectedWeapon = w
		DropDownBtn.Text = "Select Weapon: " .. SelectedWeapon
		WeaponOptions.Visible = false
	end)
end

DropDownBtn.MouseButton1Click:Connect(function()
	WeaponOptions.Visible = not WeaponOptions.Visible
end)
--===[ PH·∫¶N 5: TAB STATUS ]===--

local StatusTab = TabFrames["Tab Status"]

-- Scroll View cho Tab Status
local StatusScroll = Instance.new("ScrollingFrame", StatusTab)
StatusScroll.Size = UDim2.new(1, 0, 1, 0)
StatusScroll.CanvasSize = UDim2.new(0, 0, 0, 300)
StatusScroll.ScrollBarThickness = 4
StatusScroll.BackgroundTransparency = 1

local StatusLayout = Instance.new("UIListLayout", StatusScroll)
StatusLayout.Padding = UDim.new(0, 6)

-- Ti√™u ƒë·ªÅ gi·ªØa "Status Checking"
local Title = Instance.new("TextLabel", StatusScroll)
Title.Size = UDim2.new(1, -10, 0, 30)
Title.Text = "Status Checking"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextXAlignment = Enum.TextXAlignment.Center

-- Text Labels cho status
local Label_Boss = Instance.new("TextLabel", StatusScroll)
local Label_Moon = Instance.new("TextLabel", StatusScroll)
local Label_Time = Instance.new("TextLabel", StatusScroll)
local Label_Player = Instance.new("TextLabel", StatusScroll)
local Label_Fruit = Instance.new("TextLabel", StatusScroll)

for _, lbl in ipairs({Label_Boss, Label_Moon, Label_Time, Label_Player, Label_Fruit}) do
	lbl.Size = UDim2.new(1, -10, 0, 25)
	lbl.TextColor3 = Color3.fromRGB(255, 255, 255)
	lbl.BackgroundTransparency = 1
	lbl.Font = Enum.Font.Gotham
	lbl.TextSize = 14
	lbl.TextXAlignment = Enum.TextXAlignment.Left
	lbl.Text = "Loading..."
end

-- Th·ªùi gian ƒë√£ b·∫≠t script
local startTime = tick()

-- H√†m check boss spawn
local function checkBosses()
	local saw = workspace:FindFirstChild("The Saw") and "‚úÖ" or "‚ùå"
	local whitebeard = workspace:FindFirstChild("Whitebeard") and "‚úÖ" or "‚ùå"
	local shanks = workspace:FindFirstChild("Shanks") and "‚úÖ" or "‚ùå"

	Label_Boss.Text = string.format("Boss Spawn - The Saw: %s | Whitebeard: %s | Shanks: %s", saw, whitebeard, shanks)
end

-- H√†m check moon
local function checkMoon()
	local moon = game.Lighting:FindFirstChild("ClockTime")
	if moon then
		local phase = game.Lighting:GetMoonPhase and game.Lighting:GetMoonPhase() or ""
		local emoji = {
			["NewMoon"] = "üåë",
			["QuarterMoon"] = "üåì",
			["HalfMoon"] = "üåó",
			["FullMoon"] = "üåï"
		}
		local moonIcon = emoji[phase] or "‚ùì"
		Label_Moon.Text = "Moon Phase: " .. moonIcon .. " (" .. (phase or "Unknown") .. ")"
	else
		Label_Moon.Text = "Moon Phase: Unknown ‚ùå"
	end
end

-- H√†m check ng∆∞·ªùi v√† fruit
local function checkServerStats()
	local players = #game.Players:GetPlayers()
	Label_Player.Text = "Players in Server: " .. tostring(players)

	local fruitFound = false
	for _, v in pairs(workspace:GetChildren()) do
		if string.find(v.Name:lower(), "fruit") then
			fruitFound = true
			Label_Fruit.Text = "Fruit Spawn / Drop: ‚úÖ (" .. v.Name .. ")"
			break
		end
	end

	if not fruitFound then
		Label_Fruit.Text = "Fruit Spawn / Drop: ‚ùå"
	end
end

-- Auto update loop m·ªói 2 gi√¢y
task.spawn(function()
	while task.wait(2) do
		checkBosses()
		checkMoon()
		checkServerStats()

		local elapsed = math.floor(tick() - startTime)
		local minutes = math.floor(elapsed / 60)
		local seconds = elapsed % 60
		Label_Time.Text = string.format("Time in Server: %02d:%02d", minutes, seconds)
	end
end)
-- Tab General UI (Panel tr√°i: n√∫t b·∫≠t farm, Panel ph·∫£i: ch·ªçn weapon)
local GeneralTab = TabFrames["Tab General"]

-- Scroll b√™n tr√°i
local LeftScroll = Instance.new("ScrollingFrame", GeneralTab)
LeftScroll.Size = UDim2.new(0.5, -10, 1, 0)
LeftScroll.Position = UDim2.new(0, 0, 0, 0)
LeftScroll.CanvasSize = UDim2.new(0, 0, 0, 200)
LeftScroll.ScrollBarThickness = 4
LeftScroll.BackgroundTransparency = 1

local LeftLayout = Instance.new("UIListLayout", LeftScroll)
LeftLayout.Padding = UDim.new(0, 8)

-- Scroll b√™n ph·∫£i
local RightScroll = Instance.new("ScrollingFrame", GeneralTab)
RightScroll.Size = UDim2.new(0.5, -10, 1, 0)
RightScroll.Position = UDim2.new(0.5, 10, 0, 0)
RightScroll.CanvasSize = UDim2.new(0, 0, 0, 200)
RightScroll.ScrollBarThickness = 4
RightScroll.BackgroundTransparency = 1

local RightLayout = Instance.new("UIListLayout", RightScroll)
RightLayout.Padding = UDim.new(0, 8)

-- T·∫°o Toggle Button
local function createToggleButton(parent, title, callback)
	local Frame = Instance.new("Frame", parent)
	Frame.Size = UDim2.new(1, -10, 0, 40)
	Frame.BackgroundTransparency = 1

	local TextLabel = Instance.new("TextLabel", Frame)
	TextLabel.Size = UDim2.new(0.8, 0, 1, 0)
	TextLabel.Text = title
	TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	TextLabel.BackgroundTransparency = 1
	TextLabel.Font = Enum.Font.GothamBold
	TextLabel.TextSize = 14
	TextLabel.TextXAlignment = Enum.TextXAlignment.Left

	local Status = Instance.new("ImageLabel", Frame)
	Status.Size = UDim2.new(0, 24, 0, 24)
	Status.Position = UDim2.new(0.9, 0, 0.5, -12)
	Status.BackgroundTransparency = 1
	Status.Image = "rbxassetid://6031094664" -- empty circle

	local Toggle = false
	Frame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			Toggle = not Toggle
			Status.Image = Toggle and "rbxassetid://6031094690" or "rbxassetid://6031094664"
			if callback then callback(Toggle) end
		end
	end)
end

-- Button b·∫≠t Auto Farm (Panel tr√°i)
createToggleButton(LeftScroll, "Auto Farm Level", function(state)
	getgenv().AutoFarmEnabled = state
end)

-- Ti√™u ƒë·ªÅ Setting Farm (Panel ph·∫£i)
local FarmSettingTitle = Instance.new("TextLabel", RightScroll)
FarmSettingTitle.Size = UDim2.new(1, -10, 0, 30)
FarmSettingTitle.Text = "Setting Farming"
FarmSettingTitle.Font = Enum.Font.GothamBold
FarmSettingTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
FarmSettingTitle.TextSize = 14
FarmSettingTitle.BackgroundTransparency = 1
FarmSettingTitle.TextXAlignment = Enum.TextXAlignment.Center

-- Select Weapon (ch·ªâ Sword v√† Melee)
local SelectedWeapon = "Nothing"

local DropDownBtn = Instance.new("TextButton", RightScroll)
DropDownBtn.Size = UDim2.new(1, -10, 0, 40)
DropDownBtn.Text = "Select Weapon: " .. SelectedWeapon
DropDownBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
DropDownBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
DropDownBtn.Font = Enum.Font.GothamBold
DropDownBtn.TextSize = 13
Instance.new("UICorner", DropDownBtn).CornerRadius = UDim.new(0, 8)

-- Weapon Options
local WeaponOptions = Instance.new("Frame", DropDownBtn)
WeaponOptions.Size = UDim2.new(1, 0, 0, 100)
WeaponOptions.Position = UDim2.new(0, 0, 1, 0)
WeaponOptions.Visible = false
WeaponOptions.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Instance.new("UICorner", WeaponOptions).CornerRadius = UDim.new(0, 8)

local ScrollList = Instance.new("ScrollingFrame", WeaponOptions)
ScrollList.Size = UDim2.new(1, 0, 1, 0)
ScrollList.CanvasSize = UDim2.new(0, 0, 0, 200)
ScrollList.ScrollBarThickness = 3
ScrollList.BackgroundTransparency = 1

local ListLayout = Instance.new("UIListLayout", ScrollList)
ListLayout.Padding = UDim.new(0, 3)

local WeaponList = {"Sword", "Melee"}

for _, weapon in ipairs(WeaponList) do
	local btn = Instance.new("TextButton", ScrollList)
	btn.Size = UDim2.new(1, -10, 0, 28)
	btn.Text = weapon
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 12
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

	btn.MouseButton1Click:Connect(function()
		SelectedWeapon = weapon
		DropDownBtn.Text = "Select Weapon: " .. SelectedWeapon
		WeaponOptions.Visible = false
		getgenv().SelectedWeapon = weapon
	end)
end

DropDownBtn.MouseButton1Click:Connect(function()
	WeaponOptions.Visible = not WeaponOptions.Visible
end)
